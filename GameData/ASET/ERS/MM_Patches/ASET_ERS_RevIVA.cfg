// ASET ERS IVAs:
// - Stock
// - ASET_Props, ASET ERS props & RPM

//===== Cab Module IVA Switching =============================================================================

@PART[ERSCabin]:NEEDS[B9PartSwitch&RasterPropMonitor]:BEFORE[zzz_Reviva]  //Internal *part* name
{
	// Remove all RasterPropMonitor and add just one empty one
	// Each sub-type will fill in contents as required
	-MODULE[RasterPropMonitorComputer],* {}
	MODULE
	{
		name = RasterPropMonitorComputer
	}
}

//@PART[ERSCabin]:HAS[!MODULE[MASFlightComputer]]:NEEDS[DE_IVAExtension&AvionicsSystems]:FOR[zzz_Reviva]  //Internal *part* name
//{
//    MODULE
//    {
//        name = MASFlightComputer
//        requiresPower = true
//        gLimit = 4.7
//        baseDisruptionChance = 0.20
//    }
//}

@PART[ERSCabin]:NEEDS[B9PartSwitch]:FOR[zzz_Reviva]  //Internal *part* name
{
	@INTERNAL
	{
		@name = ERS_Cab    //assigns new generic IVA internal IVA name, in the *part* cfg
	}

	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = IVASwitch
		switcherDescription = IVA
		switcherDescriptionPlural = IVAs
		switchInFlight = true
		uiGroupName = IVASwitch
		uiGroupDisplayName = IVA Switch
		
		SUBTYPE
		{
			name = Stock
			primaryColor = White
			secondaryColor = White
			descriptionSummary = Stock IVA
			descriptionDetail = Use the Stock IVA.\n<color=green>Low Tech</color>
			
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleIVASwitch
				}
				DATA
				{
					internalName = ERS_Cab_Stock  //internal IVA name, to use for this SUBTYPE
				}
			}
		}

		SUBTYPE//:NEEDS[ASET/ASET_Props,RasterPropMonitor]  //NEEDS specifies any specific mod requirements for *this* IVA
		{
			name = ASET-RPM
			primaryColor = Blue
			secondaryColor = White
			descriptionSummary = ASET-RPM IVA
			descriptionDetail = Uses ASET_Props, ASET ERS props & RPM provided IVA.\n<color=green>Medium Tech Digital</color>
			
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleIVASwitch
				}
				DATA
				{
					internalName = ERS_Cab_ASET  //internal IVA name, to use for this SUBTYPE
				}
			}
		}
	}

	MODULE
	{
		name = ModuleIVASwitch
		internalName = ERS_Cab    //calls new generic IVA internal IVA name, in the *part* cfg
	}
}


//===== Crew/Hab Module IVA Switching =============================================================================

@PART[ERSCrewModule]:NEEDS[B9PartSwitch&RasterPropMonitor]:BEFORE[zzz_Reviva]
{
	// Remove all RasterPropMonitor and add just one empty one
	// Each sub-type will fill in contents as required
	-MODULE[RasterPropMonitorComputer],* {}
	MODULE
	{
		name = RasterPropMonitorComputer
	}
}

//@PART[ERSCrewModule]:HAS[!MODULE[MASFlightComputer]]:NEEDS[DE_IVAExtension&AvionicsSystems]:FOR[zzz_Reviva]
//{
//    MODULE
//    {
//        name = MASFlightComputer
//        requiresPower = true
//        gLimit = 4.7
//        baseDisruptionChance = 0.20
//    }
//}

@PART[ERSCrewModule]:NEEDS[B9PartSwitch]:FOR[zzz_Reviva]
{
	@INTERNAL
	{
		@name = ERS_Crew
	}

	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = IVASwitch
		switcherDescription = IVA
		switcherDescriptionPlural = IVAs
		switchInFlight = true
		uiGroupName = IVASwitch
		uiGroupDisplayName = IVA Switch
		
		SUBTYPE
		{
			name = Stock
			primaryColor = White
			secondaryColor = White
			descriptionSummary = Stock IVA
			descriptionDetail = Use the Stock IVA.\n<color=green>Low Tech</color>
			
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleIVASwitch
				}
				DATA
				{
					internalName = ERS_Crew_Stock
				}
			}
		}

		SUBTYPE//:NEEDS[ASET/ASET_Props,RasterPropMonitor]
		{
			name = ASET-RPM
			primaryColor = Blue
			secondaryColor = White
			descriptionSummary = ASET-RPM IVA
			descriptionDetail = Uses ASET_Props, ASET ERS props & RPM provided IVA.\n<color=green>Medium Tech Digital</color>
			
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleIVASwitch
				}
				DATA
				{
					internalName = ERS_Crew_ASET
				}
			}
		}
	}

	MODULE
	{
		name = ModuleIVASwitch
		internalName = ERS_Crew
	}
}

